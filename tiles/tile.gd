extends Sprite2D

func open_frame(num: int):
	frame = num
	rotation_degrees = randi_range(0, 3) * 90


func recalculate_children():
	var children_count = get_child_count()
	var counter = 0 
	for child in get_children():
		child.position += Vector2(children_position[children_count][counter][0], children_position[children_count][counter][1])
		print(child.position)
		counter += 1


func _on_child_entered_tree(node):
	recalculate_children()


func _on_child_exiting_tree(node):
	recalculate_children()


var children_position = {1: [[0, 0]], 
						 2: [[50, 50], [-50, -50]], 
						 3: [[50, 50], [0, -50], [-50, 50]], 
						 4: [[50, 50], [50, -50], [-50, 50], [-50, -50]],
						 5: [[50, 50], [50, -50], [-50, 50], [-50, -50], [0, 0]],
						 6: [[50, 50], [50, -50], [-50, 50], [-50, -50], [50, 0], [-50, 0]],
						 7: [[50, 50], [50, -50], [-50, 50], [-50, -50], [67, 0], [-67, 0], [0, 0]],
						 8: [[67, 67], [67, -67], [-67, 67], [-67, -67], [50, 0], [-50, 0], [0, 67], [0, -67]],
						 9: [[67, 67], [67, -67], [-67, 67], [-67, -67], [67, 0], [-67, 0], [0, 67], [0, -67], [0, 0]],
						 10: [[67, 75], [67, -75], [-67, 75], [-67, -75], [50, 25], [-50, 25], [0, 75], [0, -75], [50, -25], [-50, -25]],
						 11: [[67, 75], [67, -75], [-67, 75], [-67, -75], [67, 25], [-67, 25], [0, 75], [0, -75], [67, -25], [-67, -25], [0, 0]],
						 12: [[67, 75], [67, -75], [-67, 75], [-67, -75], [67, 25], [-67, 25], [0, 75], [0, -75], [67, -25], [-67, -25], [0, 25], [0, -25]],
						 13: [[75, 75], [75, -75], [-75, 75], [-75, -75], [67, 25], [-67, 25], [-25, 75], [25, -75], [67, -25], [-67, -25], [25, 75], [-25, -75], [0, 0]],
						 14: [[75, 75], [75, -75], [-75, 75], [-75, -75], [67, 25], [-67, 25], [-25, 75], [25, -75], [67, -25], [-67, -25], [25, 75], [-25, -75], [0, 25], [0, -25]],
						 15: [[75, 75], [75, -75], [-75, 75], [-75, -75], [67, 25], [-67, 25], [-25, 75], [25, -75], [67, -25], [-67, -25], [25, 75], [-25, -75], [25, 25], [0, -25], [-25, 25]],
						 16: [[75, 75], [75, -75], [-75, 75], [-75, -75], [75, 25], [-75, 25], [-25, 75], [25, -75], [75, -25], [-75, -25], [25, 75], [-25, -75], [25, 25], [-25, -25], [-25, 25], [25, -25]]}
